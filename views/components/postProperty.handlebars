<!DOCTYPE html>
<html>
<head>
  <title>Add Property</title>
  <link rel="stylesheet" href="../../styles/components-styles/postProperty.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
  <header>
    <h1>Add Property</h1>
  </header>
  <main>
    <form id="add--property" action="/host/post_property" method="post">
      <label for="propertyName">Property Name:</label>
      <input type="text" name="propertyName" id="propertyName" required>

      <label for="description">Description:</label>
      <textarea name="description" id="description" required></textarea>

      <label for="numberOfRooms">Number of Rooms:</label>
      <input type="number" name="numberOfRooms" id="numberOfRooms" required>

      <label for="numberOfBathrooms">Number of Bathrooms:</label>
      <input type="number" name="numberOfBathrooms" id="numberOfBathrooms" required>

      <label for="amenities">Amenities:</label>
      <input type="text" name="amenities" id="amenities" required>

      <label for="address">Address:</label>
      <input type="text" name="address" id="address" required>

     

      <label for="pricePerNight">Price per Night:</label>
      <input type="number" name="pricePerNight" id="pricePerNight" required>

      <label for="availability">Availability:</label>
      <input type="text" name="availability" id="availability" required>

      {{!-- <label for="images">Images:</label>
      <input type="file" name="images" id="images" multiple required accept="image/*"> --}}

{{!-- <label for="images">Images:</label>
<input type="file" name="images" id="images" multiple accept="image/*" style="display:none">
<button type="button" onclick="document.getElementById('images').click()">Upload Images</button>
<div id="images-preview"></div>
<input type="hidden" name="base64Images" id="base64Images" value=""> --}}

<input type="file" name="images" id="images" multiple accept="image/*" onchange="previewImages(event)">


      <button id="add-property" type="submit">Add Property</button>
    </form>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    flatpickr('#availability', {
      mode: 'range',
      dateFormat: 'Y-m-d',
      minDate: 'today'
    });


function previewImages(event) {
  const imageInput = event.target;
  const imagesPreview = document.getElementById('images-preview');
  imagesPreview.innerHTML = '';

  if (imageInput.files && imageInput.files.length > 0) {
    for (const imageFile of imageInput.files) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.createElement('img');
        img.src = e.target.result;
        img.width = 100;
        img.height = 100;
        imagesPreview.appendChild(img);
      };
      reader.readAsDataURL(imageFile);
    }
  }
}

document.getElementById('add--property').addEventListener('submit', function (e) {
  const imageInput = document.getElementById('images');
  const base64ImagesInput = document.getElementById('base64Images');
  const base64Images = [];

  if (imageInput.files && imageInput.files.length > 0) {
    for (const imageFile of imageInput.files) {
      const reader = new FileReader();
      reader.onload = function(e) {
        base64Images.push(e.target.result);
        if (base64Images.length === imageInput.files.length) {
          // Store the base64-encoded images in the hidden input field
          base64ImagesInput.value = JSON.stringify(base64Images);
        }
      };
      reader.readAsDataURL(imageFile);
    }
  } else {
    base64ImagesInput.value = '';
  }
});




  </script>
  <script src="../../styles/client-side/addPropertyFormValidation.js"></script>
</body>
</html>


